# 스프링에서 트랜잭션과 영속성 컨텍스트

> 스프링 컨테이너는 트랜잭션 범위의 영속성 컨텍스트 전략을 기본으로 사용한다.

따라서 트랜잭션이 시작되면 영속성 컨텍스트가 생성되고 트랜잭션이 종료되면 영속성 컨텍스트도 없어진다.

<br>

### 트랜잭션 범위의 영속성 컨텍스트 전략의 특징
- 트랜잭션이 같으면 같은 영속성 컨텍스트를 사용한다.

다양한 위치에서 엔티티 매니저를 주입받아도 트랜잭션이 같으면 항상 같은 영속성 컨텍스트를 사용한다.

<br>

- 트랜잭션이 다르면 다른 영속성 컨텍스트를 사용한다.

같은 엔티티 매니저를 사용해도 트랜잭션에 따라 접근하는 영속성 컨텍스트가 다르다.  
스프링 컨테이너는 스레드마다 다른 트랜잭션을 할당하게 되므로 ```멀티 스레드 상황에 안전하다.```
